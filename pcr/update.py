# 用于日常检查更新
import config
import create
# create.create(config.db_name, config.data_path)
# create.create(config.db_name_jp, config.data_path_jp)
import role
import equip_data_craft_rate
import read_db_equipment
import unique
import schedule
import room_unit_comments
import redive_file_get

def update_unit_new():
    filter = [
        100101, 100201, 100301, 100401, 100501, 100601, 100701, 100801, 100901, 101001, 
        101101, 101201, 101301, 101401, 101501, 101601, 101701, 101801, 102001, 102101, 
        102201, 102301, 102501, 102601, 102701, 102801, 102901, 103001, 103101, 103201, 
        103301, 103401, 103601, 103701, 103801, 104001, 104201, 104301, 104401, 104501, 
        104601, 104701, 104801, 104901, 105001, 105101, 105201, 105301, 105401, 105501, 
        105601, 105701, 105801, 105901, 106001, 106101, 106301, 106401, 106501, 106601, 
        106701, 106801, 106901, 107001, 107101, 107501, 107601, 107701, 107801, 107901, 
        108001, 108101, 108201, 108301, 108401, 108501, 108601, 108701, 108801, 108901, 
        109001, 109101, 109201, 109301, 109401, 109501, 109601, 109701, 109801, 109901, 
        110001, 110101, 110301, 110401, 110501, 110601, 110701, 110801, 110901, 111001, 
        111101, 111201, 111301, 111401, 111501, 111601, 111701, 111801, 111901, 112001, 
        112101, 112201, 112301, 112401, 112501, 112601, 112701, 112801, 112901, 113001, 
        113101, 113201, 113301, 113401, 113501, 113601, 113701, 113801, 113901, 114001, 
        114101, 114201, 114301, 114401, 114501, 114601, 114701, 115001, 115501, 115601, 
        115701, 115801, 115901, 116001, 116201, 116301, 116401, 116501, 116601, 116701, 
        116801, 116901, 117001, 117101, 117201, 117301, 117401, 117501, 117601, 117701, 
        117801, 117901, 118001, 118101, 118201, 118501, 119001, 119101, 119201, 119301, 
        119901, 120001, 120701, 120801, 120901, 121001, 121101, 121201, 121301, 121401, 
        121501, 121601, 121901, 122001, 122101, 122201, 122301, 122401, 122501, 122601, 
        122701, 122801, 122901, 123001, 123101, 123201, 123301, 123501, 123601, 123701, 
        123801, 123901, 124001, 124101, 124201, 124501, 124601, 124701, 124801, 124901, 
        125001, 125101, 125201, 125301, 125401, 125501, 125601, 125701, 125801, 126001, 
        126101, 126201, 126301, 126401, 126501, 126601, 126701, 126801, 126901, 127001, 
        127101, 127201, 127301, 127501, 127601, 127901, 170101, 170201, 
        180101, 180201, 180301, 180401, 180501, 180601, 180701, 180801, 180901, 181001,
        # 卫星
        110201, 123401
    ]
    incs = role.role(filter)
    print("units: %s" % str(incs))
    for inc in incs:
        redive_file_get.get_new_imgs(str(inc)[:4])
    role.f.close()
    role.conn.close()
    role.conn_jp.close()

def update_unique():
    filter = [
        130011, 130021, 130031, 130041, 130051, 130061, 130071, 130081, 130091, 130101, 
        130111, 130121, 130131, 130141, 130151, 130161, 130171, 130181, 130201, 130211, 
        130221, 130231, 130251, 130261, 130271, 130281, 130291, 130301, 130311, 130321, 
        130331, 130341, 130361, 130371, 130381, 130401, 130421, 130431, 130441, 130451, 
        130461, 130471, 130481, 130491, 130501, 130511, 130521, 130531, 130541, 130551, 
        130561, 130571, 130581, 130591, 130601, 130611, 130631, 130651, 130641, 130661, 
        130701, 130681, 130711, 130751, 130761, 130771, 130781, 130791, 130801, 130811, 
        130821, 130831, 130841, 130851, 130861, 130871, 130881, 130891, 130901, 130911, 
        130921, 130931, 130941, 130951, 130961, 130971, 130981, 130991, 131001, 131011, 
        131031, 131041, 131051, 131061, 131071, 131081, 131091, 131101, 131111, 131121, 
        131131, 131141, 131151, 131161, 131171, 131181, 131191, 131201, 131211, 131221, 
        131231, 131241, 131251, 131261, 131271, 131281, 131291, 131301, 131311, 131321, 
        131331, 131341, 131351, 131361, 131371, 131381, 131391, 131401, 131411, 131421, 
        131431, 131441, 131451, 131461, 131471, 131501, 131551, 131561, 131571, 131581, 
        131591, 131601, 131621, 131631, 131651, 131661, 138021, 138041, 131641, 131671, 
        131681, 131691, 131701, 131711, 131721, 131731, 131741, 131751, 131761, 131771, 
        131781, 131791, 131801, 131901, 131911, 131921, 131931, 131991, 132071, 132081, 
        132091, 132101, 132111, 132121, 132131, 132141, 132151, 132161, 138011, 138061, 
        132191, 132201, 132211, 132221, 132231, 132241, 132251, 132261, 132271, 132281, 
        132291, 132311, 132321, 132331, 137011, 137021, 138031, 130162, 130602, 130772, 
        130792, 130802,
        130332, 130582, 130812, 130822, 130832, 132351, 132361, 132371, 132381, 132391, 
        132401, 132411, 132421, 138051
    ]
    equips = unique.equipment_craft(filter)
    print("uniques(删第二个数字3): %s" % str(equips))
    redive_file_get.get_png(redive_file_get.redive_equip, equips, "png", "icon_equipment_")
    unique.conn.close()
    unique.conn_jp.close()

def update_equip():
    equips = equip_data_craft_rate.equipment_craft(67)
    redive_file_get.get_equip_craft(equips)
    equip_data_craft_rate.conn.close()
    equip_data_craft_rate.conn_jp.close()

def update_map_6x():
    read_db_equipment.areaid = "110"
    read_db_equipment.map_equipment(67, 5, 68, 20)
    read_db_equipment.areaid = "120"
    units = read_db_equipment.map_equipment(66, 3, 68, 5)
    for unit in units:
        redive_file_get.get_png(redive_file_get.redive_item_icon, ["31" + unit], "png", "Icon_item_")
    read_db_equipment.areaid = "130"
    units = read_db_equipment.map_equipment(65, 2, 68, 5)
    for unit in units:
        redive_file_get.get_6x_icon_chr("1" + unit)
    read_db_equipment.conn.close()
    
def update_calendar():
    schedule.schedule(config.db_name)

def room_comments():
    # https://wiki.biligame.com/pcr/?curid=29226
    room_unit_comments.roomUnitComments(config.db_name, 5030, False)
    room_unit_comments.roomUnitComments(config.db_name_jp, 7744)

if __name__ == "__main__":
    update_unit_new()
    update_unique()
    update_equip()
    update_map_6x()
    update_calendar()
    room_comments()